<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Auto Top‑Up Settings</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <section class="settings-panel">
    <h2>Auto Top‑Up Settings</h2>

    <form id="topup-form">
      <label for="monthly-limit">Monthly Spend Limit (€):</label>
      <input type="number" id="monthly-limit" name="limit" min="0" step="1" value="50" required />

      <label for="reminder">Email Reminder at (% spent):</label>
      <input type="range" id="reminder" name="reminderThreshold" min="0" max="100" value="75" />
      <span id="reminder-val">75%</span>

      <fieldset>
        <legend>Recharge When Balance ≤</legend>
        <label><input type="radio" name="trigger" value="0" checked /> €0</label>
        <label><input type="radio" name="trigger" value="3" /> €3</label>
        <label><input type="radio" name="trigger" value="5" /> €5</label>
      </fieldset>

      <button type="submit">Save Settings</button>
      <button type="button" onclick="history.back()">Cancel</button>
    </form>
  </section>

  <script>
    const form = document.getElementById("topup-form");
const reminderInput = document.getElementById("reminder");
const reminderVal = document.getElementById("reminder-val");

reminderInput.addEventListener("input", () => {
  reminderVal.textContent = `${reminderInput.value}%`;
});

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const data = {
    limit: +form.limit.value,
    reminderThreshold: +form.reminder.value,
    triggerLevel: +form.querySelector("input[name='trigger']:checked").value,
  };

  // Simulated API call
  try {
    console.log("Saving:", data);
    alert("Settings saved!");
    history.back();
  } catch (err) {
    alert("Error saving settings.");
  }
});

  </script>
</body>
</html>
